---
title: "History Configuration"
description: "Configure historical snapshot tracking and playback features."
---

History configuration enables tracking orderbook snapshots for playback and analysis.

## Basic Configuration
```tsx
import { Orderbook } from '@krono/kit'

export const App = () => {
  return (
    <Orderbook.Root
      config={{
        symbol: 'BTC/USD',
        historyEnabled: true,
        maxHistoryLength: 100
      }}
    >
      {/* Components */}
    </Orderbook.Root>
  )
}
```

## History Options

### historyEnabled

Enable historical snapshot tracking.

**Type:** `boolean`

**Default:** `false`
```tsx
<Orderbook.Root
  config={{
    symbol: 'BTC/USD',
    historyEnabled: true
  }}
>
  {/* Components */}
</Orderbook.Root>
```

<Note>
    Enabling history increases memory usage proportional to `maxHistoryLength`.
</Note>

### maxHistoryLength

Maximum number of snapshots to retain.

**Type:** `number`

**Default:** `100`
```tsx
<Orderbook.Root
  config={{
    symbol: 'BTC/USD',
    historyEnabled: true,
    maxHistoryLength: 50
  }}
>
  {/* Components */}
</Orderbook.Root>
```

**Memory Impact:**

- 10 snapshots ≈ 50KB
- 50 snapshots ≈ 250KB
- 100 snapshots ≈ 500KB
- 1000 snapshots ≈ 5MB

## Using Playback
```tsx
import { useOrderbookPlayback } from '@krono/hooks'

const PlaybackControls = () => {
  const {
    history,
    currentIndex,
    isPlaying,
    play,
    pause,
    reset
  } = useOrderbookPlayback()

  return (
    <div className="flex gap-2">
      <button onClick={play} disabled={isPlaying}>Play</button>
      <button onClick={pause} disabled={!isPlaying}>Pause</button>
      <button onClick={reset}>Reset</button>
      <span>{currentIndex + 1} / {history.length}</span>
    </div>
  )
}
```

## Configuration Examples

<AccordionGroup>
    <Accordion title="Basic Playback">
        ```tsx
        <Orderbook.Root
            config={{
                symbol: 'BTC/USD',
                historyEnabled: true,
                maxHistoryLength: 100
            }}
        >
            <OrderbookPanel />
            <PlaybackControls />
        </Orderbook.Root>
        ```
    </Accordion>

    <Accordion title="Short-Term Analysis">
        ```tsx
        <Orderbook.Root
            config={{
                symbol: 'BTC/USD',
                historyEnabled: true,
                maxHistoryLength: 20,
                throttleMs: 500
            }}
        >
            <OrderbookPanel />
        </Orderbook.Root>
        ```
    </Accordion>

    <Accordion title="Extended History">
        ```tsx
        <Orderbook.Root
            config={{
                symbol: 'BTC/USD',
                historyEnabled: true,
                maxHistoryLength: 500,
                throttleMs: 100
            }}
        >
            <OrderbookPanel />
        </Orderbook.Root>
        ```
    </Accordion>

    <Accordion title="Production Without History">
        ```tsx
        <Orderbook.Root
            config={{
                symbol: 'BTC/USD',
                historyEnabled: false
            }}
        >
            <OrderbookPanel />
        </Orderbook.Root>
        ```
    </Accordion>
</AccordionGroup>

## Complete Example
```tsx
import { Orderbook, OrderbookPanel } from '@krono/kit'
import { useOrderbookPlayback } from '@krono/hooks'
import { Play, Pause, RotateCcw } from 'lucide-react'

const PlaybackUI = () => {
  const {
    history,
    currentIndex,
    isPlaying,
    play,
    pause,
    reset,
    goToIndex
  } = useOrderbookPlayback()

  return (
    <div className="space-y-4">
      <div className="flex gap-2">
        <button onClick={isPlaying ? pause : play}>
          {isPlaying ? <Pause /> : <Play />}
        </button>
        <button onClick={reset}>
          <RotateCcw />
        </button>
        <span>{currentIndex + 1} / {history.length}</span>
      </div>

      <input
        type="range"
        min={0}
        max={history.length - 1}
        value={currentIndex}
        onChange={(e) => goToIndex(Number(e.target.value))}
      />
    </div>
  )
}

export const App = () => {
  return (
    <Orderbook.Root
      config={{
        symbol: 'BTC/USD',
        historyEnabled: true,
        maxHistoryLength: 100
      }}
    >
      <OrderbookPanel />
      <PlaybackUI />
    </Orderbook.Root>
  )
}
```

## Notes

<Note>
    Snapshots are captured after throttling. Lower `throttleMs` = more snapshots.
</Note>

<Tip>
    Set `maxHistoryLength` to only what you need. 50-100 works for most use cases.
</Tip>

<Warning>
    Very large `maxHistoryLength` (>1000) can impact performance on mobile.
</Warning>
